(function(t){function e(e){for(var a,i,s=e[0],l=e[1],c=e[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},o={app:0},r=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/single-line-font-renderer/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},1:function(t,e){},2:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-navigation-drawer",{attrs:{permanent:"",absolute:"",app:"",width:280},scopedSlots:t._u([{key:"append",fn:function(){return[n("v-divider"),n("v-btn",{attrs:{large:"",plain:"",href:"https://github.com/jvolker/single-line-font-renderer",target:"_blank"}},[t._v("Improve this tool"),n("v-icon",{attrs:{right:""}},[t._v(" mdi-pencil ")])],1)]},proxy:!0}])},[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",{staticClass:"title"},[t._v(" Single-Line Font Renderer ")])],1)],1),n("v-divider"),n("v-list",[n("v-list-item",[n("v-list-item-content",[n("v-textarea",{attrs:{label:"Text input",outlined:""},on:{input:t.render},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),n("v-container",{staticClass:"font pa-0 mb-4"},[n("v-subheader",{staticClass:"mb-2"},[t._v("Font")]),n("v-row",{staticClass:"mx-0 mt-2 mb-6"},[t._v(" "+t._s(t.selectedFontName)+" ")]),t.useCustomFont?[n("v-subheader",{staticClass:"mb-2"},[t._v("Load custom SVG font file")]),n("v-file-input",{staticClass:"mt-1 pt-0",attrs:{accept:".svg",dense:"","single-line":"",label:"Select file â€¦"},on:{change:t.loadLocalFont},model:{value:t.customFontInput,callback:function(e){t.customFontInput=e},expression:"customFontInput"}})]:[n("v-subheader",{staticClass:"mb-1"},[t._v("Default fonts")]),n("v-select",{staticClass:"mt-1",attrs:{items:t.fonts,"item-text":"displayName",dense:""},on:{input:t.selectFont},model:{value:t.selectedFontName,callback:function(e){t.selectedFontName=e},expression:"selectedFontName"}}),n("v-btn",{staticClass:"pl-0",attrs:{"x-small":"",plain:"",href:"https://gitlab.com/oskay/svg-fonts",target:"_blank"}},[t._v("Improve these fonts"),n("v-icon",{staticClass:"ml-0",attrs:{"x-small":"",right:""}},[t._v(" mdi-pencil ")])],1)],n("v-row",{staticClass:"mx-0 mt-2 mb-1",attrs:{justify:"center"}},[n("v-btn-toggle",{attrs:{mandatory:"",small:""}},[n("v-btn",{attrs:{small:""},on:{click:function(e){t.useCustomFont=!1}}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-format-list-bulleted")])],1),n("v-btn",{attrs:{small:""},on:{click:function(e){t.useCustomFont=!0}}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-paperclip")])],1)],1)],1)],2),t.showFontSmoothing?[n("div",{staticClass:"mt-2 mb-0"},[n("v-subheader",{staticClass:"mb-2"},[t._v("Smoothing (experimental)")]),n("v-checkbox",{staticClass:"ma-0",attrs:{label:"Simplify",dense:""},on:{change:function(e){return t.applyFontSettings(!0)}},model:{value:t.enableFontSimplification,callback:function(e){t.enableFontSimplification=e},expression:"enableFontSimplification"}}),t.enableFontSimplification?n("div",[n("v-subheader",[t._v("Simplify Deviation")]),n("v-slider",{attrs:{step:"1",max:"30",min:"0"},on:{input:function(e){return t.applyFontSettings(!0)}},scopedSlots:t._u([{key:"append",fn:function(){return[n("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"45px"},attrs:{type:"number",dense:""},model:{value:t.simplifyFactor,callback:function(e){t.simplifyFactor=e},expression:"simplifyFactor"}})]},proxy:!0}],null,!1,1736954012),model:{value:t.simplifyFactor,callback:function(e){t.simplifyFactor=e},expression:"simplifyFactor"}})],1):t._e()],1),n("div",{staticClass:"mt-0"},[n("v-checkbox",{staticClass:"ma-0",attrs:{label:"Smooth",dense:""},on:{change:function(e){return t.applyFontSettings(!0)}},model:{value:t.enableFontSmoothing,callback:function(e){t.enableFontSmoothing=e},expression:"enableFontSmoothing"}}),t.enableFontSmoothing?n("v-select",{attrs:{items:t.smoothingTypes,label:"Smooth Type"},on:{input:function(e){return t.applyFontSettings(!0)}},model:{value:t.smoothingType,callback:function(e){t.smoothingType=e},expression:"smoothingType"}}):t._e(),t.enableFontSmoothing&&"catmull-rom"==t.smoothingType?n("div",[n("v-subheader",[t._v("Smooth amount")]),n("v-slider",{attrs:{step:"0.01",max:"1",min:"0.01"},on:{input:function(e){return t.applyFontSettings(!0)}},scopedSlots:t._u([{key:"append",fn:function(){return[n("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"45px"},attrs:{type:"number",dense:""},model:{value:t.smoothingFactor,callback:function(e){t.smoothingFactor=e},expression:"smoothingFactor"}})]},proxy:!0}],null,!1,371602627),model:{value:t.smoothingFactor,callback:function(e){t.smoothingFactor=e},expression:"smoothingFactor"}})],1):t._e()],1)]:n("v-btn",{staticClass:"mb-2",attrs:{small:"",block:"",text:""},on:{click:function(e){t.showFontSmoothing=!0}}},[t._v("smoothing (experimental)")]),n("v-divider",{staticClass:"mt-1 mb-6"}),n("div",[n("v-subheader",[t._v("Scale")]),n("v-slider",{attrs:{step:"0.01",max:"10",min:"0.1",block:""},on:{input:t.applyFontScale},scopedSlots:t._u([{key:"append",fn:function(){return[n("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"45px"},attrs:{type:"number",step:"0.01",dense:""},model:{value:t.fontScale,callback:function(e){t.fontScale=e},expression:"fontScale"}})]},proxy:!0}]),model:{value:t.fontScale,callback:function(e){t.fontScale=e},expression:"fontScale"}})],1),n("div",[n("v-subheader",[t._v("Stroke width")]),n("v-slider",{attrs:{step:"0.01",max:"20",min:"0.1"},on:{input:t.applyStrokeWeight},scopedSlots:t._u([{key:"append",fn:function(){return[n("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"45px"},attrs:{type:"number",dense:""},model:{value:t.strokeWeight,callback:function(e){t.strokeWeight=e},expression:"strokeWeight"}})]},proxy:!0}]),model:{value:t.strokeWeight,callback:function(e){t.strokeWeight=e},expression:"strokeWeight"}})],1),n("v-btn",{attrs:{color:"primary",block:"",elevation:"2"},on:{click:t.exportSVG}},[t._v("Download SVG")])],2)],1)],1)],1),n("v-main",[n("v-container",{attrs:{id:"alerts"}},[n("v-row",{staticClass:"mt-2",attrs:{align:"center",justify:"center"}},[n("v-alert",{attrs:{dismissible:"",type:"error"},model:{value:t.error,callback:function(e){t.error=e},expression:"error"}},[t._v("Couldn't load local font file.")])],1)],1),n("v-container",{attrs:{"fill-height":"",fluid:"",id:"svgWrapper"}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",[n("svg",{ref:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:t.svgWidth,height:t.svgHeight},domProps:{innerHTML:t._s(t.displayedSvgContent)}})])],1)],1)],1)],1)},r=[],i=(n("99af"),n("4de4"),n("7db0"),n("4160"),n("d81d"),n("b0c0"),n("d3b7"),n("ac1f"),n("8a79"),n("3ca3"),n("5319"),n("159b"),n("ddb0"),n("2b3d"),n("2909")),s=(n("96cf"),n("1da1")),l=n("bc3a"),c=n.n(l),u=n("6f0d"),p=n("8368"),d=n.n(p),f=n("2222"),m=n.n(f),h=Object(u["setupCache"])({maxAge:864e5}),v=c.a.create({adapter:h.adapter});function g(t,e){return t.length>e?t.substr(0,e-1):t}var b={selectedFontName:"Hershey Sans1"},y={name:"App",data:function(){return{fonts:[],selectedFontName:null,useCustomFont:!1,customFontInput:null,customFont:null,strokeWeight:1,fontScale:1,showFontSmoothing:!1,enableFontSimplification:!1,simplifyFactor:0,enableFontSmoothing:!1,smoothingTypes:["catmull-rom","geometric","continuous","asymmetric"],smoothingType:"catmull-rom",smoothingFactor:.5,right:null,rawSvgContent:null,displayedSvgContent:null,svgWidth:null,svgHeight:null,rawSVGWidth:null,rawSVGHeight:null,text:"The Woodman set to work at once, and so sharp was his axe that the tree was soon chopped nearly through.",renderedSVG:null,error:null}},mounted:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getFonts();case 2:this.reset();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),computed:{selectedFont:function(){var t=this;return this.fonts.find((function(e){return e.displayName===t.selectedFontName}))}},methods:{getFonts:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(){return o=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="https://gitlab.com/api/v4/projects/12941474/repository/tree?path=".concat(e,"&per_page=100"),t.next=3,v.get(a).then((function(t){var a=t.data.map((function(t){return{fileName:t.name,displayName:t.name.replace(".svg","").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z])([A-Z][a-z])/g,"$1 $2"),basePath:e}})).filter((function(t){return t.fileName.endsWith(".svg")}));n.fonts=[].concat(Object(i["a"])(n.fonts),Object(i["a"])(a))}));case 3:case"end":return t.stop()}}),t)}))),o.apply(this,arguments)},a=function(t){return o.apply(this,arguments)},n=t,e.next=5,a("fonts/EMS");case 5:return e.next=7,a("fonts/Hershey");case 7:case"end":return e.stop()}}),e)})))()},selectFont:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="".concat(t.selectedFont.basePath,"/").concat(t.selectedFont.fileName),a="https://gitlab.com/api/v4/projects/12941474/repository/files/".concat(encodeURIComponent(n),"/raw?ref=master"),e.next=4,v.get(a).then((function(e){var n=d.a.addSVGFontFromData(e.data);t.$set(t.selectedFont,"fontName",n)})).then(t.render);case 4:case"end":return e.stop()}}),e)})))()},loadLocalFont:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=4;break}return e.customFont=null,e.reset(),n.abrupt("return");case 4:a=new FileReader,a.readAsText(t),a.onload=function(){e.customFont=null;var t=d.a.addSVGFontFromData(a.result);if(t){e.error=!1;var n={displayName:d.a.getFontData(t).info["font-family"],fontName:t};e.selectedFontName=n.displayName,e.customFont=n,e.render()}else e.error=!0,e.customFontInput=null,e.reset()};case 7:case"end":return n.stop()}}),n)})))()},render:function(){var t,e=this;this.displayedSvgContent=this.rawSvgContent=d.a.renderTextSVG(this.text,{font:this.useCustomFont&&null!==(t=this.customFont)&&void 0!==t&&t.fontName?this.customFont.fontName:this.selectedFont.fontName,scale:.1}),this.$nextTick((function(){e.getSVGSize(!0),e.applyFontSettings()}))},applyFontSettings:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=function(){t.applyStrokeWeight(),t.applyFontScale()};e?this.smoothFont(n):n()},applyFontScale:function(){if(this.$refs.svg){var t=this.$refs.svg.firstChild;t.setAttribute("transform","scale(".concat(this.fontScale,")")),this.getSVGSize()}},applyStrokeWeight:function(){if(this.$refs.svg){var t=this.$refs.svg.firstChild;t.setAttribute("stroke-width",this.strokeWeight)}},getSVGSize:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.$refs.svg.getBBox();this.svgWidth=Math.ceil(e.x+e.width+e.x),this.svgHeight=Math.ceil(e.y+e.height+e.y),t&&(this.rawSVGWidth=this.svgWidth,this.rawSVGHeight=this.svgHeight)},smoothFont:function(t){var e=this;if(this.rawSVGWidth&&this.rawSVGHeight&&0!=this.rawSVGWidth&&0!=this.rawSVGHeight){m.a.setup([this.rawSVGWidth,this.rawSVGHeight]);var n='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" >',a="</svg>";m.a.project.importSVG("".concat(n,"\n").concat(this.rawSvgContent,"\n").concat(a),(function(t){if(e.enableFontSimplification||e.enableFontSmoothing){var n=t.children[0].children[0].children;n.forEach((function(t){e.enableFontSimplification&&t.simplify(e.simplifyFactor),e.enableFontSmoothing&&t.smooth({type:e.smoothingType,factor:e.smoothingFactor})}))}})),this.displayedSvgContent=m.a.project.exportSVG().innerHTML,this.$nextTick((function(){t&&t()}))}},exportSVG:function(){console.log("export svg");var t=this.$refs.svg.outerHTML;if(t){var e=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),n=window.URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download=g(this.text.replace(/[^a-z0-9]/gi,"-").toLowerCase(),60)+".svg",a.click(),window.URL.revokeObjectURL(n)}},reset:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.selectedFontName=b.selectedFontName,e.next=3,t.selectFont();case 3:t.render();case 4:case"end":return e.stop()}}),e)})))()}}},S=y,x=(n("034f"),n("2877")),F=n("6544"),w=n.n(F),k=n("0798"),C=n("7496"),V=n("8336"),_=n("a609"),j=n("ac7c"),T=n("62ad"),G=n("a523"),N=n("ce7e"),O=n("23a7"),W=n("132d"),R=n("8860"),L=n("da13"),H=n("5d23"),I=n("f6c4"),$=n("f774"),A=n("0fd9"),M=n("b974"),D=n("ba0d"),P=n("e0c7"),z=n("8654"),B=n("a844"),U=Object(x["a"])(S,o,r,!1,null,null,null),E=U.exports;w()(U,{VAlert:k["a"],VApp:C["a"],VBtn:V["a"],VBtnToggle:_["a"],VCheckbox:j["a"],VCol:T["a"],VContainer:G["a"],VDivider:N["a"],VFileInput:O["a"],VIcon:W["a"],VList:R["a"],VListItem:L["a"],VListItemContent:H["a"],VListItemTitle:H["b"],VMain:I["a"],VNavigationDrawer:$["a"],VRow:A["a"],VSelect:M["a"],VSlider:D["a"],VSubheader:P["a"],VTextField:z["a"],VTextarea:B["a"]});var Z=n("f309");a["a"].use(Z["a"]);var J=new Z["a"]({});a["a"].config.productionTip=!1,new a["a"]({vuetify:J,render:function(t){return t(E)}}).$mount("#app")},8368:function(t,e,n){n("99af"),n("ac1f"),n("5319"),n("1276");var a=n("ded3"),o=n("02cc");function r(t){var n={info:"Invalid Font",getChar:function(){return null}},r=e.svgFonts[t].data,i=o.load(r,{xmlMode:!0});return n.type="svg",n.info=a(a({},i("font-face").attr()),i("font").attr()),n.chars={},i("glyph").each((function(t){var e=i("glyph")[t];n.chars[e.attribs.unicode]={type:e.attribs.unicode,name:e.attribs["glyph-name"],width:parseFloat(e.attribs["horiz-adv-x"])||parseFloat(n.info["horiz-adv-x"]),d:e.attribs.d||null}})),n.getChar=function(t){return n.chars[t]},n}e.svgFonts=[],e.getFontData=r,e.addSVGFontFromData=function(t){try{var n=o.load(t,{xmlMode:!0}),a=n("font-face").attr("font-family"),r=a.toLowerCase().replace(/\s/g,"_");return e.svgFonts[r]={name:a,data:t},r}catch(i){return console.error(i),!1}},e.renderTextSVG=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a({id:"text",font:"futural",charSpacingAdjust:0,charHeightAdjust:0,scale:2,pos:{x:0,y:0}},e),i=o.load("<g>",{xmlMode:!0});try{var s=r(n.font),l="svg"===s.type?1:1.68,c={left:0,top:0},u=i("g");u.attr({id:n.id,stroke:"black",fill:"none",transform:"scale(".concat(n.scale,") translate(").concat(n.pos.x,", ").concat(n.pos.y,")")});var p=0,d=i("<g>").attr("id",n.id+"-line-"+p);u.prepend(d);var f=t.split(" ");for(var m in f){var h=f[m];for(var v in h){var g=h[v],b=s.getChar(g);if(b){var y=i("<path>").attr({d:b.d,stroke:"black","stroke-width":1,fill:"none",transform:"translate(".concat(c.left,", ").concat(c.top,")"),letter:h[v]});"svg"===s.type&&y.attr("transform","translate(".concat(c.left,", ").concat(s.info["units-per-em"],") scale(1, -1)")),d.append(y).append(i("</path>")),c.left+=b.width*l+n.charSpacingAdjust}}c.left+=parseInt(s.info["horiz-adv-x"],10)+n.charSpacingAdjust}}catch(S){return console.error(S),!1}return i.html()}},"85ec":function(t,e,n){}});
//# sourceMappingURL=app.033f6059.js.map